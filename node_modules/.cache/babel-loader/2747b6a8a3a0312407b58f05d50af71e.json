{"ast":null,"code":"import { GatewayStatus, TokenIssuanceState, CivicPassIssuanceStatus, State, GatekeeperRecordState } from '../types'; // eslint-disable-next-line import/prefer-default-export\n\nexport var resetState = function resetState(state) {\n  return Object.assign(Object.assign({}, state), {\n    gatewayStatus: GatewayStatus.UNKNOWN,\n    tokenRequested: false,\n    iframeMinimized: false,\n    firstTokenCheck: true,\n    renderIframe: false,\n    gatewayToken: undefined,\n    powoRequested: undefined,\n    refreshIntervalId: undefined,\n    powoFinished: false,\n    refreshInProgress: false,\n    tokenIssuanceState: TokenIssuanceState.NOT_REQUESTED,\n    walletToRefresh: undefined,\n    walletPowoInProgress: false,\n    gatekeeperRecordState: undefined,\n    civicPass: {\n      status: CivicPassIssuanceStatus.NOT_REQUESTED,\n      iframeMinimized: false,\n      renderIframe: false\n    }\n  });\n};\n\nvar hasExpired = function hasExpired(gatewayToken) {\n  var now = Math.floor(Date.now() / 1000);\n  return !!gatewayToken.expiryTime && now >= gatewayToken.expiryTime;\n};\n\nvar isLocationNotSupported = function isLocationNotSupported(recordState) {\n  if (!recordState) return false;\n  return [GatekeeperRecordState.LOCATION_NOT_SUPPORTED].includes(recordState);\n};\n\nvar isIssuedLocationNotSupported = function isIssuedLocationNotSupported(recordState) {\n  if (!recordState) return false;\n  return [GatekeeperRecordState.ISSUED_LOCATION_NOT_SUPPORTED].includes(recordState);\n};\n\nexport var statusFromToken = function statusFromToken(state, gatewayToken) {\n  if (!gatewayToken) return state.gatewayStatus;\n\n  switch (gatewayToken.state) {\n    case State.ACTIVE:\n      if (isLocationNotSupported(state.gatekeeperRecordState)) {\n        return GatewayStatus.LOCATION_NOT_SUPPORTED;\n      }\n\n      if (isIssuedLocationNotSupported(state.gatekeeperRecordState)) {\n        return GatewayStatus.REFRESH_TOKEN_REQUIRED;\n      }\n\n      if (state.gatewayStatus === GatewayStatus.PROOF_OF_WALLET_OWNERSHIP) {\n        return GatewayStatus.PROOF_OF_WALLET_OWNERSHIP;\n      }\n\n      return hasExpired(gatewayToken) ? GatewayStatus.REFRESH_TOKEN_REQUIRED : GatewayStatus.ACTIVE;\n\n    case State.REVOKED:\n      return GatewayStatus.REVOKED;\n\n    case State.FROZEN:\n      return GatewayStatus.FROZEN;\n\n    default:\n      return GatewayStatus.UNKNOWN;\n  }\n};","map":{"version":3,"sources":["C:/Test Mint/metaplex/js/packages/candy-machine-ui/node_modules/@civic/solana-gateway-react/dist/esm/useReducer/utils.js"],"names":["GatewayStatus","TokenIssuanceState","CivicPassIssuanceStatus","State","GatekeeperRecordState","resetState","state","Object","assign","gatewayStatus","UNKNOWN","tokenRequested","iframeMinimized","firstTokenCheck","renderIframe","gatewayToken","undefined","powoRequested","refreshIntervalId","powoFinished","refreshInProgress","tokenIssuanceState","NOT_REQUESTED","walletToRefresh","walletPowoInProgress","gatekeeperRecordState","civicPass","status","hasExpired","now","Math","floor","Date","expiryTime","isLocationNotSupported","recordState","LOCATION_NOT_SUPPORTED","includes","isIssuedLocationNotSupported","ISSUED_LOCATION_NOT_SUPPORTED","statusFromToken","ACTIVE","REFRESH_TOKEN_REQUIRED","PROOF_OF_WALLET_OWNERSHIP","REVOKED","FROZEN"],"mappings":"AAAA,SAASA,aAAT,EAAwBC,kBAAxB,EAA4CC,uBAA5C,EAAqEC,KAArE,EAA4EC,qBAA5E,QAA0G,UAA1G,C,CACA;;AACA,OAAO,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAACC,KAAD;AAAA,SAAYC,MAAM,CAACC,MAAP,CAAcD,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBF,KAAlB,CAAd,EAAwC;AAAEG,IAAAA,aAAa,EAAET,aAAa,CAACU,OAA/B;AAAwCC,IAAAA,cAAc,EAAE,KAAxD;AAA+DC,IAAAA,eAAe,EAAE,KAAhF;AAAuFC,IAAAA,eAAe,EAAE,IAAxG;AAA8GC,IAAAA,YAAY,EAAE,KAA5H;AAAmIC,IAAAA,YAAY,EAAEC,SAAjJ;AAA4JC,IAAAA,aAAa,EAAED,SAA3K;AAAsLE,IAAAA,iBAAiB,EAAEF,SAAzM;AAAoNG,IAAAA,YAAY,EAAE,KAAlO;AAAyOC,IAAAA,iBAAiB,EAAE,KAA5P;AAAmQC,IAAAA,kBAAkB,EAAEpB,kBAAkB,CAACqB,aAA1S;AAAyTC,IAAAA,eAAe,EAAEP,SAA1U;AAAqVQ,IAAAA,oBAAoB,EAAE,KAA3W;AAAkXC,IAAAA,qBAAqB,EAAET,SAAzY;AAAoZU,IAAAA,SAAS,EAAE;AACreC,MAAAA,MAAM,EAAEzB,uBAAuB,CAACoB,aADqc;AAEreV,MAAAA,eAAe,EAAE,KAFod;AAGreE,MAAAA,YAAY,EAAE;AAHud;AAA/Z,GAAxC,CAAZ;AAAA,CAAnB;;AAKP,IAAMc,UAAU,GAAG,SAAbA,UAAa,CAACb,YAAD,EAAkB;AACjC,MAAMc,GAAG,GAAGC,IAAI,CAACC,KAAL,CAAWC,IAAI,CAACH,GAAL,KAAa,IAAxB,CAAZ;AACA,SAAO,CAAC,CAACd,YAAY,CAACkB,UAAf,IAA6BJ,GAAG,IAAId,YAAY,CAACkB,UAAxD;AACH,CAHD;;AAIA,IAAMC,sBAAsB,GAAG,SAAzBA,sBAAyB,CAACC,WAAD,EAAiB;AAC5C,MAAI,CAACA,WAAL,EACI,OAAO,KAAP;AACJ,SAAO,CAAC/B,qBAAqB,CAACgC,sBAAvB,EAA+CC,QAA/C,CAAwDF,WAAxD,CAAP;AACH,CAJD;;AAKA,IAAMG,4BAA4B,GAAG,SAA/BA,4BAA+B,CAACH,WAAD,EAAiB;AAClD,MAAI,CAACA,WAAL,EACI,OAAO,KAAP;AACJ,SAAO,CAAC/B,qBAAqB,CAACmC,6BAAvB,EAAsDF,QAAtD,CAA+DF,WAA/D,CAAP;AACH,CAJD;;AAKA,OAAO,IAAMK,eAAe,GAAG,SAAlBA,eAAkB,CAAClC,KAAD,EAAQS,YAAR,EAAyB;AACpD,MAAI,CAACA,YAAL,EACI,OAAOT,KAAK,CAACG,aAAb;;AACJ,UAAQM,YAAY,CAACT,KAArB;AACI,SAAKH,KAAK,CAACsC,MAAX;AACI,UAAIP,sBAAsB,CAAC5B,KAAK,CAACmB,qBAAP,CAA1B,EAAyD;AACrD,eAAOzB,aAAa,CAACoC,sBAArB;AACH;;AACD,UAAIE,4BAA4B,CAAChC,KAAK,CAACmB,qBAAP,CAAhC,EAA+D;AAC3D,eAAOzB,aAAa,CAAC0C,sBAArB;AACH;;AACD,UAAIpC,KAAK,CAACG,aAAN,KAAwBT,aAAa,CAAC2C,yBAA1C,EAAqE;AACjE,eAAO3C,aAAa,CAAC2C,yBAArB;AACH;;AACD,aAAOf,UAAU,CAACb,YAAD,CAAV,GAA2Bf,aAAa,CAAC0C,sBAAzC,GAAkE1C,aAAa,CAACyC,MAAvF;;AACJ,SAAKtC,KAAK,CAACyC,OAAX;AACI,aAAO5C,aAAa,CAAC4C,OAArB;;AACJ,SAAKzC,KAAK,CAAC0C,MAAX;AACI,aAAO7C,aAAa,CAAC6C,MAArB;;AACJ;AACI,aAAO7C,aAAa,CAACU,OAArB;AAjBR;AAmBH,CAtBM","sourcesContent":["import { GatewayStatus, TokenIssuanceState, CivicPassIssuanceStatus, State, GatekeeperRecordState, } from '../types';\n// eslint-disable-next-line import/prefer-default-export\nexport const resetState = (state) => (Object.assign(Object.assign({}, state), { gatewayStatus: GatewayStatus.UNKNOWN, tokenRequested: false, iframeMinimized: false, firstTokenCheck: true, renderIframe: false, gatewayToken: undefined, powoRequested: undefined, refreshIntervalId: undefined, powoFinished: false, refreshInProgress: false, tokenIssuanceState: TokenIssuanceState.NOT_REQUESTED, walletToRefresh: undefined, walletPowoInProgress: false, gatekeeperRecordState: undefined, civicPass: {\n        status: CivicPassIssuanceStatus.NOT_REQUESTED,\n        iframeMinimized: false,\n        renderIframe: false,\n    } }));\nconst hasExpired = (gatewayToken) => {\n    const now = Math.floor(Date.now() / 1000);\n    return !!gatewayToken.expiryTime && now >= gatewayToken.expiryTime;\n};\nconst isLocationNotSupported = (recordState) => {\n    if (!recordState)\n        return false;\n    return [GatekeeperRecordState.LOCATION_NOT_SUPPORTED].includes(recordState);\n};\nconst isIssuedLocationNotSupported = (recordState) => {\n    if (!recordState)\n        return false;\n    return [GatekeeperRecordState.ISSUED_LOCATION_NOT_SUPPORTED].includes(recordState);\n};\nexport const statusFromToken = (state, gatewayToken) => {\n    if (!gatewayToken)\n        return state.gatewayStatus;\n    switch (gatewayToken.state) {\n        case State.ACTIVE:\n            if (isLocationNotSupported(state.gatekeeperRecordState)) {\n                return GatewayStatus.LOCATION_NOT_SUPPORTED;\n            }\n            if (isIssuedLocationNotSupported(state.gatekeeperRecordState)) {\n                return GatewayStatus.REFRESH_TOKEN_REQUIRED;\n            }\n            if (state.gatewayStatus === GatewayStatus.PROOF_OF_WALLET_OWNERSHIP) {\n                return GatewayStatus.PROOF_OF_WALLET_OWNERSHIP;\n            }\n            return hasExpired(gatewayToken) ? GatewayStatus.REFRESH_TOKEN_REQUIRED : GatewayStatus.ACTIVE;\n        case State.REVOKED:\n            return GatewayStatus.REVOKED;\n        case State.FROZEN:\n            return GatewayStatus.FROZEN;\n        default:\n            return GatewayStatus.UNKNOWN;\n    }\n};\n"]},"metadata":{},"sourceType":"module"}