{"ast":null,"code":"import logger from '../logger';\nimport { IFRAME_ID } from '../constants';\nexport const eventEmitter = window => {\n  return {\n    postMessage: (message, targetOrigin) => {\n      window.postMessage(message, targetOrigin);\n    }\n  };\n}; // TODO: Duplicate types in CivicSign\n// Move to a central repo or use TS paths\n\nexport var CivicSignEventTypeResponse;\n\n(function (CivicSignEventTypeResponse) {\n  CivicSignEventTypeResponse[\"RESPONSE_PUBLIC_KEY\"] = \"RESPONSE_PUBLIC_KEY\";\n  CivicSignEventTypeResponse[\"RESPONSE_DID\"] = \"RESPONSE_DID\";\n  CivicSignEventTypeResponse[\"RESPONSE_SIGNED_PROOF\"] = \"RESPONSE_SIGNED_PROOF\";\n})(CivicSignEventTypeResponse || (CivicSignEventTypeResponse = {}));\n\nexport var CivicSignEventTypeRequest;\n\n(function (CivicSignEventTypeRequest) {\n  CivicSignEventTypeRequest[\"REQUEST_PUBLIC_KEY\"] = \"REQUEST_PUBLIC_KEY\";\n  CivicSignEventTypeRequest[\"REQUEST_DID\"] = \"REQUEST_DID\";\n  CivicSignEventTypeRequest[\"REQUEST_SIGNED_PROOF\"] = \"REQUEST_SIGNED_PROOF\";\n})(CivicSignEventTypeRequest || (CivicSignEventTypeRequest = {}));\n\nexport class RemoteSignWindowEventEmitter {\n  constructor(targetWindow) {\n    this.targetWindow = targetWindow;\n  }\n\n  sendPublicKey(publicKey) {\n    this.emit({\n      event: CivicSignEventTypeResponse.RESPONSE_PUBLIC_KEY,\n      data: publicKey\n    });\n  }\n\n  sendDid(did) {\n    this.emit({\n      event: CivicSignEventTypeResponse.RESPONSE_DID,\n      data: did\n    });\n  }\n\n  sendSignedProof(proof) {\n    this.emit({\n      event: CivicSignEventTypeResponse.RESPONSE_SIGNED_PROOF,\n      data: proof\n    });\n  }\n\n  emit(event) {\n    this.targetWindow.postMessage(event, '*');\n  }\n\n}\nexport const remoteSignWindowEventEmitterImplementation = () => {\n  var _a;\n\n  const iFrameWindow = (_a = document.getElementById(IFRAME_ID)) === null || _a === void 0 ? void 0 : _a.contentWindow;\n\n  if (!iFrameWindow) {\n    logger.error('no iFrame window present');\n    return null;\n  }\n\n  return new RemoteSignWindowEventEmitter(eventEmitter(iFrameWindow));\n};","map":{"version":3,"sources":["C:/Test Mint/metaplex/JS/packages/candy-machine-ui/node_modules/@civic/solana-gateway-react/dist/esm/utils/remoteSign.js"],"names":["logger","IFRAME_ID","eventEmitter","window","postMessage","message","targetOrigin","CivicSignEventTypeResponse","CivicSignEventTypeRequest","RemoteSignWindowEventEmitter","constructor","targetWindow","sendPublicKey","publicKey","emit","event","RESPONSE_PUBLIC_KEY","data","sendDid","did","RESPONSE_DID","sendSignedProof","proof","RESPONSE_SIGNED_PROOF","remoteSignWindowEventEmitterImplementation","_a","iFrameWindow","document","getElementById","contentWindow","error"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,WAAnB;AACA,SAASC,SAAT,QAA0B,cAA1B;AACA,OAAO,MAAMC,YAAY,GAAIC,MAAD,IAAY;AACpC,SAAO;AACHC,IAAAA,WAAW,EAAE,CAACC,OAAD,EAAUC,YAAV,KAA2B;AACpCH,MAAAA,MAAM,CAACC,WAAP,CAAmBC,OAAnB,EAA4BC,YAA5B;AACH;AAHE,GAAP;AAKH,CANM,C,CAOP;AACA;;AACA,OAAO,IAAIC,0BAAJ;;AACP,CAAC,UAAUA,0BAAV,EAAsC;AACnCA,EAAAA,0BAA0B,CAAC,qBAAD,CAA1B,GAAoD,qBAApD;AACAA,EAAAA,0BAA0B,CAAC,cAAD,CAA1B,GAA6C,cAA7C;AACAA,EAAAA,0BAA0B,CAAC,uBAAD,CAA1B,GAAsD,uBAAtD;AACH,CAJD,EAIGA,0BAA0B,KAAKA,0BAA0B,GAAG,EAAlC,CAJ7B;;AAKA,OAAO,IAAIC,yBAAJ;;AACP,CAAC,UAAUA,yBAAV,EAAqC;AAClCA,EAAAA,yBAAyB,CAAC,oBAAD,CAAzB,GAAkD,oBAAlD;AACAA,EAAAA,yBAAyB,CAAC,aAAD,CAAzB,GAA2C,aAA3C;AACAA,EAAAA,yBAAyB,CAAC,sBAAD,CAAzB,GAAoD,sBAApD;AACH,CAJD,EAIGA,yBAAyB,KAAKA,yBAAyB,GAAG,EAAjC,CAJ5B;;AAKA,OAAO,MAAMC,4BAAN,CAAmC;AACtCC,EAAAA,WAAW,CAACC,YAAD,EAAe;AACtB,SAAKA,YAAL,GAAoBA,YAApB;AACH;;AACDC,EAAAA,aAAa,CAACC,SAAD,EAAY;AACrB,SAAKC,IAAL,CAAU;AACNC,MAAAA,KAAK,EAAER,0BAA0B,CAACS,mBAD5B;AAENC,MAAAA,IAAI,EAAEJ;AAFA,KAAV;AAIH;;AACDK,EAAAA,OAAO,CAACC,GAAD,EAAM;AACT,SAAKL,IAAL,CAAU;AACNC,MAAAA,KAAK,EAAER,0BAA0B,CAACa,YAD5B;AAENH,MAAAA,IAAI,EAAEE;AAFA,KAAV;AAIH;;AACDE,EAAAA,eAAe,CAACC,KAAD,EAAQ;AACnB,SAAKR,IAAL,CAAU;AACNC,MAAAA,KAAK,EAAER,0BAA0B,CAACgB,qBAD5B;AAENN,MAAAA,IAAI,EAAEK;AAFA,KAAV;AAIH;;AACDR,EAAAA,IAAI,CAACC,KAAD,EAAQ;AACR,SAAKJ,YAAL,CAAkBP,WAAlB,CAA8BW,KAA9B,EAAqC,GAArC;AACH;;AAxBqC;AA0B1C,OAAO,MAAMS,0CAA0C,GAAG,MAAM;AAC5D,MAAIC,EAAJ;;AACA,QAAMC,YAAY,GAAG,CAACD,EAAE,GAAGE,QAAQ,CAACC,cAAT,CAAwB3B,SAAxB,CAAN,MAA8C,IAA9C,IAAsDwB,EAAE,KAAK,KAAK,CAAlE,GAAsE,KAAK,CAA3E,GAA+EA,EAAE,CAACI,aAAvG;;AACA,MAAI,CAACH,YAAL,EAAmB;AACf1B,IAAAA,MAAM,CAAC8B,KAAP,CAAa,0BAAb;AACA,WAAO,IAAP;AACH;;AACD,SAAO,IAAIrB,4BAAJ,CAAiCP,YAAY,CAACwB,YAAD,CAA7C,CAAP;AACH,CARM","sourcesContent":["import logger from '../logger';\nimport { IFRAME_ID } from '../constants';\nexport const eventEmitter = (window) => {\n    return {\n        postMessage: (message, targetOrigin) => {\n            window.postMessage(message, targetOrigin);\n        },\n    };\n};\n// TODO: Duplicate types in CivicSign\n// Move to a central repo or use TS paths\nexport var CivicSignEventTypeResponse;\n(function (CivicSignEventTypeResponse) {\n    CivicSignEventTypeResponse[\"RESPONSE_PUBLIC_KEY\"] = \"RESPONSE_PUBLIC_KEY\";\n    CivicSignEventTypeResponse[\"RESPONSE_DID\"] = \"RESPONSE_DID\";\n    CivicSignEventTypeResponse[\"RESPONSE_SIGNED_PROOF\"] = \"RESPONSE_SIGNED_PROOF\";\n})(CivicSignEventTypeResponse || (CivicSignEventTypeResponse = {}));\nexport var CivicSignEventTypeRequest;\n(function (CivicSignEventTypeRequest) {\n    CivicSignEventTypeRequest[\"REQUEST_PUBLIC_KEY\"] = \"REQUEST_PUBLIC_KEY\";\n    CivicSignEventTypeRequest[\"REQUEST_DID\"] = \"REQUEST_DID\";\n    CivicSignEventTypeRequest[\"REQUEST_SIGNED_PROOF\"] = \"REQUEST_SIGNED_PROOF\";\n})(CivicSignEventTypeRequest || (CivicSignEventTypeRequest = {}));\nexport class RemoteSignWindowEventEmitter {\n    constructor(targetWindow) {\n        this.targetWindow = targetWindow;\n    }\n    sendPublicKey(publicKey) {\n        this.emit({\n            event: CivicSignEventTypeResponse.RESPONSE_PUBLIC_KEY,\n            data: publicKey,\n        });\n    }\n    sendDid(did) {\n        this.emit({\n            event: CivicSignEventTypeResponse.RESPONSE_DID,\n            data: did,\n        });\n    }\n    sendSignedProof(proof) {\n        this.emit({\n            event: CivicSignEventTypeResponse.RESPONSE_SIGNED_PROOF,\n            data: proof,\n        });\n    }\n    emit(event) {\n        this.targetWindow.postMessage(event, '*');\n    }\n}\nexport const remoteSignWindowEventEmitterImplementation = () => {\n    var _a;\n    const iFrameWindow = (_a = document.getElementById(IFRAME_ID)) === null || _a === void 0 ? void 0 : _a.contentWindow;\n    if (!iFrameWindow) {\n        logger.error('no iFrame window present');\n        return null;\n    }\n    return new RemoteSignWindowEventEmitter(eventEmitter(iFrameWindow));\n};\n"]},"metadata":{},"sourceType":"module"}